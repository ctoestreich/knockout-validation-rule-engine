/*! knockout-valdiation-rule-engine - v1.0.0 - 2013-12-03
* Copyright (c) 2013 Christian Oestreich; Licensed MIT */
(function(e){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(require("knockout"),require("knockout.validation"),exports):"function"==typeof define&&define.amd?define(["knockout","knockout.validation","exports"],e):e(ko,ko.validation={},ko.ruleEngine={})})(function(e,t,i){if(void 0===typeof e)throw"Knockout is required, please ensure it is loaded before loading this plug-in";if(void 0===typeof t)throw"Knockout.Validation is required, please ensure it is loaded before loading this plug-in";return e.ruleEngine=i,function(t,i){function n(e,n){n&&d.extend(t,n),s(e,i)}function r(e){return t[e]||{}}function o(t,i){e.validation.rules[t]=i,e.validation.registerExtenders()}function a(t){e.validation.init(t)}function s(t,i){var n=[],o=d.unwrapObservable(t);e.isObservable(t)&&!t.isValid&&t.extend({validatable:!0}),o&&(u(o)||c(o))&&(n=o),d.objectForEach(n,function(t,n){var o=r(t);o&&e.isObservable(n)&&n.extend(o),i.deep&&void 0!==n&&!e.isObservable(n)&&s(n,i)})}function u(e){return e.isArray||"[object Array]"===Object.prototype.toString.call(e)}function c(e){return null!==e&&"object"==typeof e}var d=e.utils;return i=i||{},t=t||{},i=d.extend({insertMessages:!0,messagesOnModified:!0,deep:!0},i),a(i),{addRule:o,apply:n,getFieldRuleSet:r,registerExtenders:e.validation.registerExtenders,ruleSet:t,rules:e.validation.rules}}});